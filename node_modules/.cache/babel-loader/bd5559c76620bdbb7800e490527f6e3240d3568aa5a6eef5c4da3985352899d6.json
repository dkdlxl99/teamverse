{"ast":null,"code":"import axios from \"axios\";\nconst API_BASE_URL = \"http://localhost:8082\";\nexport const registerUser = async userData => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/register`, userData);\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    throw ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || \"ÌöåÏõêÍ∞ÄÏûÖ Ïã§Ìå®\";\n  }\n};\nexport const loginUser = async loginData => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/login`, loginData, {\n      withCredentials: true // ‚úÖ Ïø†ÌÇ§ Í∏∞Î∞ò Ïù∏Ï¶ù ÏÇ¨Ïö©\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    throw ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || \"Î°úÍ∑∏Ïù∏ Ïã§Ìå®\";\n  }\n};\nexport const getUserInfo = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/api/user`, {\n      withCredentials: true\n    });\n    return response.data;\n  } catch (error) {\n    return null; // Ïù∏Ï¶ùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ null Î∞òÌôò\n  }\n};\nexport const logoutUser = async () => {\n  try {\n    await axios.post(`${API_BASE_URL}/api/user/logout`, {}, {\n      withCredentials: true\n    });\n  } catch (error) {\n    console.error(\"Î°úÍ∑∏ÏïÑÏõÉ Ïã§Ìå®\", error);\n  }\n};\nexport const refreshToken = async () => {\n  try {\n    // üü¢ Ïø†ÌÇ§ÏóêÏÑú refreshTokenÏù¥ ÏûàÎäîÏßÄ ÌôïÏù∏ ÌõÑ ÏöîÏ≤≠\n    const cookies = document.cookie.split(\"; \").reduce((acc, cookie) => {\n      const [key, value] = cookie.split(\"=\");\n      acc[key] = value;\n      return acc;\n    }, {});\n    if (!cookies.refreshToken) {\n      console.warn(\"‚õîÔ∏è refreshToken ÏóÜÏùå: ÌÜ†ÌÅ∞ Í∞±Ïã† ÏöîÏ≤≠ÌïòÏßÄ ÏïäÏùå\");\n      return null; // ÏöîÏ≤≠ÌïòÏßÄ ÏïäÍ≥† Ï¢ÖÎ£å\n    }\n\n    // ‚úÖ refreshTokenÏù¥ ÏûàÎäî Í≤ΩÏö∞ÏóêÎßå ÏöîÏ≤≠\n    const response = await axios.post(`${API_BASE_URL}/api/user/token/refresh`, {}, {\n      withCredentials: true\n    });\n    console.log(\"üü¢ ÌÜ†ÌÅ∞ Í∞±Ïã† ÏÑ±Í≥µ:\", response.data.accessToken);\n    return response.data.accessToken;\n  } catch (error) {\n    var _error$response3;\n    console.error(\"üî¥ ÌÜ†ÌÅ∞ Í∞±Ïã† Ïã§Ìå®:\", ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error);\n    return null;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","registerUser","userData","response","post","data","error","_error$response","loginUser","loginData","withCredentials","_error$response2","getUserInfo","get","logoutUser","console","refreshToken","cookies","document","cookie","split","reduce","acc","key","value","warn","log","accessToken","_error$response3"],"sources":["C:/project2/teamverse-2/src/api/authApi.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API_BASE_URL = \"http://localhost:8082\";\r\n\r\nexport const registerUser = async (userData) => {\r\n  try {\r\n    const response = await axios.post(`${API_BASE_URL}/register`, userData);\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || \"ÌöåÏõêÍ∞ÄÏûÖ Ïã§Ìå®\";\r\n  }\r\n};\r\n\r\nexport const loginUser = async (loginData) => {\r\n  try {\r\n    const response = await axios.post(`${API_BASE_URL}/login`, loginData, {\r\n      withCredentials: true, // ‚úÖ Ïø†ÌÇ§ Í∏∞Î∞ò Ïù∏Ï¶ù ÏÇ¨Ïö©\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || \"Î°úÍ∑∏Ïù∏ Ïã§Ìå®\";\r\n  }\r\n};\r\n\r\nexport const getUserInfo = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_BASE_URL}/api/user`, {\r\n      withCredentials: true,\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    return null; // Ïù∏Ï¶ùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ null Î∞òÌôò\r\n  }\r\n};\r\n\r\nexport const logoutUser = async () => {\r\n  try {\r\n    await axios.post(`${API_BASE_URL}/api/user/logout`, {}, { withCredentials: true });\r\n  } catch (error) {\r\n    console.error(\"Î°úÍ∑∏ÏïÑÏõÉ Ïã§Ìå®\", error);\r\n  }\r\n}\r\n\r\nexport const refreshToken = async () => {\r\n  try {\r\n    // üü¢ Ïø†ÌÇ§ÏóêÏÑú refreshTokenÏù¥ ÏûàÎäîÏßÄ ÌôïÏù∏ ÌõÑ ÏöîÏ≤≠\r\n    const cookies = document.cookie.split(\"; \").reduce((acc, cookie) => {\r\n      const [key, value] = cookie.split(\"=\");\r\n      acc[key] = value;\r\n      return acc;\r\n    }, {});\r\n\r\n    if (!cookies.refreshToken) {\r\n      console.warn(\"‚õîÔ∏è refreshToken ÏóÜÏùå: ÌÜ†ÌÅ∞ Í∞±Ïã† ÏöîÏ≤≠ÌïòÏßÄ ÏïäÏùå\");\r\n      return null; // ÏöîÏ≤≠ÌïòÏßÄ ÏïäÍ≥† Ï¢ÖÎ£å\r\n    }\r\n\r\n    // ‚úÖ refreshTokenÏù¥ ÏûàÎäî Í≤ΩÏö∞ÏóêÎßå ÏöîÏ≤≠\r\n    const response = await axios.post(`${API_BASE_URL}/api/user/token/refresh`, {}, { withCredentials: true });\r\n    console.log(\"üü¢ ÌÜ†ÌÅ∞ Í∞±Ïã† ÏÑ±Í≥µ:\", response.data.accessToken);\r\n    return response.data.accessToken;\r\n  } catch (error) {\r\n    console.error(\"üî¥ ÌÜ†ÌÅ∞ Í∞±Ïã† Ïã§Ìå®:\", error.response?.data || error);\r\n    return null;\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}