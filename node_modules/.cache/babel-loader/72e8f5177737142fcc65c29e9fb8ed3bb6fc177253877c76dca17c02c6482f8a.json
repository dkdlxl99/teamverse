{"ast":null,"code":"import { Client } from \"@stomp/stompjs\";\nlet stompClient = null;\nexport const getStompClient = () => {\n  if (stompClient && stompClient.connected) {\n    console.log(\"‚úÖ Í∏∞Ï°¥ WebSocket Ïó∞Í≤∞Ïù¥ Ïú†ÏßÄÎêòÍ≥† ÏûàÏäµÎãàÎã§.\");\n    return stompClient;\n  }\n  console.log(\"üìå ÏÉàÎ°úÏö¥ WebSocket ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏÉùÏÑ± Ï§ë...\");\n  stompClient = new Client({\n    brokerURL: 'ws://localhost:8082/ws',\n    connectHeaders: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    },\n    debug: str => console.log(\"üìå STOMP Debug:\", str),\n    reconnectDelay: 5000,\n    // ‚úÖ 5Ï¥àÎßàÎã§ Ïû¨Ïó∞Í≤∞ ÏãúÎèÑ\n    heartbeatIncoming: 4000,\n    heartbeatOutgoing: 4000,\n    onConnect: frame => {\n      console.log(\"‚úÖ WebSocket Ïó∞Í≤∞ ÏÑ±Í≥µ:\", frame);\n\n      // ‚úÖ Ï¥àÎåÄ Î©îÏãúÏßÄ Íµ¨ÎèÖ (Ïó∞Í≤∞ ÌõÑ Ïã§Ìñâ)\n      stompClient.subscribe(\"/topic/invites\", message => {\n        console.log(\"üì© ÏÉà Ï¥àÎåÄ ÏïåÎ¶º ÏàòÏã†:\", message.body);\n      });\n    },\n    onStompError: frame => {\n      console.error(\"üö® STOMP Ïò§Î•ò Î∞úÏÉù:\", frame.headers[\"message\"]);\n    },\n    onWebSocketError: error => {\n      console.error(\"üö® WebSocket Ïó∞Í≤∞ Ïò§Î•ò:\", error);\n    },\n    onDisconnect: () => {\n      console.warn(\"‚ö†Ô∏è WebSocket Ïó∞Í≤∞ Ï¢ÖÎ£åÎê®!\");\n    }\n  });\n  stompClient.activate();\n  return stompClient;\n};","map":{"version":3,"names":["Client","stompClient","getStompClient","connected","console","log","brokerURL","connectHeaders","Authorization","localStorage","getItem","debug","str","reconnectDelay","heartbeatIncoming","heartbeatOutgoing","onConnect","frame","subscribe","message","body","onStompError","error","headers","onWebSocketError","onDisconnect","warn","activate"],"sources":["/Users/woo/Documents/git_local/react/0213/src/api/websocket.js"],"sourcesContent":["import { Client } from \"@stomp/stompjs\";\n\nlet stompClient = null;\n\nexport const getStompClient = () => {\n    if (stompClient && stompClient.connected) {\n        console.log(\"‚úÖ Í∏∞Ï°¥ WebSocket Ïó∞Í≤∞Ïù¥ Ïú†ÏßÄÎêòÍ≥† ÏûàÏäµÎãàÎã§.\");\n        return stompClient;\n    }\n\n    console.log(\"üìå ÏÉàÎ°úÏö¥ WebSocket ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏÉùÏÑ± Ï§ë...\");\n    stompClient = new Client({\n        brokerURL: 'ws://localhost:8082/ws',\n        connectHeaders: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n        debug: (str) => console.log(\"üìå STOMP Debug:\", str),\n        \n        reconnectDelay: 5000, // ‚úÖ 5Ï¥àÎßàÎã§ Ïû¨Ïó∞Í≤∞ ÏãúÎèÑ\n        heartbeatIncoming: 4000,\n        heartbeatOutgoing: 4000,\n\n        onConnect: (frame) => {\n            console.log(\"‚úÖ WebSocket Ïó∞Í≤∞ ÏÑ±Í≥µ:\", frame);\n            \n            // ‚úÖ Ï¥àÎåÄ Î©îÏãúÏßÄ Íµ¨ÎèÖ (Ïó∞Í≤∞ ÌõÑ Ïã§Ìñâ)\n            stompClient.subscribe(\"/topic/invites\", (message) => {\n                console.log(\"üì© ÏÉà Ï¥àÎåÄ ÏïåÎ¶º ÏàòÏã†:\", message.body);\n            });\n        },\n\n        onStompError: (frame) => {\n            console.error(\"üö® STOMP Ïò§Î•ò Î∞úÏÉù:\", frame.headers[\"message\"]);\n        },\n\n        onWebSocketError: (error) => {\n            console.error(\"üö® WebSocket Ïó∞Í≤∞ Ïò§Î•ò:\", error);\n        },\n\n        onDisconnect: () => {\n            console.warn(\"‚ö†Ô∏è WebSocket Ïó∞Í≤∞ Ï¢ÖÎ£åÎê®!\");\n        }\n    });\n\n    stompClient.activate();\n    return stompClient;\n};\n\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,gBAAgB;AAEvC,IAAIC,WAAW,GAAG,IAAI;AAEtB,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAChC,IAAID,WAAW,IAAIA,WAAW,CAACE,SAAS,EAAE;IACtCC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;IAC5C,OAAOJ,WAAW;EACtB;EAEAG,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;EAC7CJ,WAAW,GAAG,IAAID,MAAM,CAAC;IACrBM,SAAS,EAAE,wBAAwB;IACnCC,cAAc,EAAE;MACZC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;IAChE,CAAC;IACDC,KAAK,EAAGC,GAAG,IAAKR,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEO,GAAG,CAAC;IAEnDC,cAAc,EAAE,IAAI;IAAE;IACtBC,iBAAiB,EAAE,IAAI;IACvBC,iBAAiB,EAAE,IAAI;IAEvBC,SAAS,EAAGC,KAAK,IAAK;MAClBb,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEY,KAAK,CAAC;;MAExC;MACAhB,WAAW,CAACiB,SAAS,CAAC,gBAAgB,EAAGC,OAAO,IAAK;QACjDf,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEc,OAAO,CAACC,IAAI,CAAC;MAC/C,CAAC,CAAC;IACN,CAAC;IAEDC,YAAY,EAAGJ,KAAK,IAAK;MACrBb,OAAO,CAACkB,KAAK,CAAC,iBAAiB,EAAEL,KAAK,CAACM,OAAO,CAAC,SAAS,CAAC,CAAC;IAC9D,CAAC;IAEDC,gBAAgB,EAAGF,KAAK,IAAK;MACzBlB,OAAO,CAACkB,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC/C,CAAC;IAEDG,YAAY,EAAEA,CAAA,KAAM;MAChBrB,OAAO,CAACsB,IAAI,CAAC,sBAAsB,CAAC;IACxC;EACJ,CAAC,CAAC;EAEFzB,WAAW,CAAC0B,QAAQ,CAAC,CAAC;EACtB,OAAO1B,WAAW;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}