{"ast":null,"code":"var _jsxFileName = \"C:\\\\project2\\\\teamverse-2-boot,react - \\uC791\\uC5C5\\\\src\\\\pages\\\\TaskPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\"; // ✅ useNavigate 추가\nimport axios from \"axios\";\nimport { getAccessToken, refreshAccessToken } from \"../utils/authUtils\"; // ✅ refreshToken 활용\nimport TaskModal from \"../components/TaskModal\"; // ✅ 모달창 컴포넌트 추가\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TaskPage = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate(); // ✅ 로그인 페이지로 이동 기능 추가\n  const queryParams = new URLSearchParams(location.search);\n  const projectId = queryParams.get(\"projectId\");\n  const [project, setProject] = useState(null); // ✅ 프로젝트 정보 저장\n  const [loading, setLoading] = useState(true); // ✅ 로딩 상태 추가\n  const [error, setError] = useState(null); // ✅ 에러 상태 추가\n  const [isModalOpen, setIsModalOpen] = useState(false); // ✅ 모달창 상태 관리\n\n  // ✅ 프로젝트 정보를 불러오는 함수\n  const fetchProject = async (retry = true) => {\n    if (!projectId) {\n      setError(\"❌ 프로젝트 ID가 없습니다.\");\n      setLoading(false);\n      return;\n    }\n    let token = getAccessToken(); // ✅ 현재 토큰 가져오기\n    if (!token) {\n      console.warn(\"❌ accessToken이 없습니다. refreshToken을 사용하여 재발급 시도...\");\n      token = await refreshAccessToken(); // ✅ 새로운 accessToken 요청\n      if (!token) {\n        alert(\"로그인이 필요합니다.\");\n        navigate(\"/login\"); // ✅ 로그인 페이지로 이동\n        return;\n      }\n    }\n    try {\n      console.log(`📡 프로젝트 정보 요청: /api/user/projects/${projectId}`);\n      const response = await axios.get(`http://localhost:8082/api/user/projects/${projectId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        withCredentials: true // ✅ 쿠키 인증 포함\n      });\n      console.log(\"✅ 프로젝트 정보 응답:\", response.data);\n      setProject(response.data);\n      setLoading(false);\n    } catch (error) {\n      var _error$response;\n      console.error(\"❌ 프로젝트 정보를 불러오는 데 실패했습니다:\", error);\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401 && retry) {\n        console.warn(\"🔄 accessToken이 만료됨. refreshToken으로 재시도...\");\n        const newToken = await refreshAccessToken();\n        if (newToken) {\n          fetchProject(false); // ✅ 한 번만 재시도\n        } else {\n          alert(\"로그인이 필요합니다.\");\n          navigate(\"/login\"); // ✅ 로그인 페이지로 이동\n        }\n      } else {\n        setError(\"❌ 프로젝트 정보를 불러올 수 없습니다.\");\n        setLoading(false);\n      }\n    }\n  };\n\n  // ✅ 페이지가 로드될 때 프로젝트 정보 가져오기\n  useEffect(() => {\n    fetchProject();\n  }, [projectId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loading ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uB85C\\uB529 \\uC911...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: project ? project.name : \"프로젝트 없음\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this) // ✅ 프로젝트 이름 표시\n    , projectId && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\uD504\\uB85C\\uC81D\\uD2B8 ID: \", projectId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setIsModalOpen(true),\n      children: \"+ \\uC5C5\\uBB34 \\uCD94\\uAC00\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), isModalOpen && /*#__PURE__*/_jsxDEV(TaskModal, {\n      onClose: () => setIsModalOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(TaskPage, \"uS/j7hdd/QB3yATpM5TSIF2hUXo=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = TaskPage;\nexport default TaskPage;\nvar _c;\n$RefreshReg$(_c, \"TaskPage\");","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","axios","getAccessToken","refreshAccessToken","TaskModal","jsxDEV","_jsxDEV","TaskPage","_s","location","navigate","queryParams","URLSearchParams","search","projectId","get","project","setProject","loading","setLoading","error","setError","isModalOpen","setIsModalOpen","fetchProject","retry","token","console","warn","alert","log","response","headers","Authorization","withCredentials","data","_error$response","status","newToken","children","fileName","_jsxFileName","lineNumber","columnNumber","name","onClick","onClose","_c","$RefreshReg$"],"sources":["C:/project2/teamverse-2-boot,react - 작업/src/pages/TaskPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\"; // ✅ useNavigate 추가\r\nimport axios from \"axios\";\r\nimport { getAccessToken, refreshAccessToken } from \"../utils/authUtils\"; // ✅ refreshToken 활용\r\nimport TaskModal from \"../components/TaskModal\"; // ✅ 모달창 컴포넌트 추가\r\n\r\n\r\nconst TaskPage = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate(); // ✅ 로그인 페이지로 이동 기능 추가\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const projectId = queryParams.get(\"projectId\");\r\n\r\n  const [project, setProject] = useState(null); // ✅ 프로젝트 정보 저장\r\n  const [loading, setLoading] = useState(true); // ✅ 로딩 상태 추가\r\n  const [error, setError] = useState(null); // ✅ 에러 상태 추가\r\n  const [isModalOpen, setIsModalOpen] = useState(false); // ✅ 모달창 상태 관리\r\n\r\n\r\n  // ✅ 프로젝트 정보를 불러오는 함수\r\n  const fetchProject = async (retry = true) => {\r\n    if (!projectId) {\r\n      setError(\"❌ 프로젝트 ID가 없습니다.\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    let token = getAccessToken(); // ✅ 현재 토큰 가져오기\r\n    if (!token) {\r\n      console.warn(\"❌ accessToken이 없습니다. refreshToken을 사용하여 재발급 시도...\");\r\n      token = await refreshAccessToken(); // ✅ 새로운 accessToken 요청\r\n      if (!token) {\r\n        alert(\"로그인이 필요합니다.\");\r\n        navigate(\"/login\"); // ✅ 로그인 페이지로 이동\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      console.log(`📡 프로젝트 정보 요청: /api/user/projects/${projectId}`);\r\n      const response = await axios.get(`http://localhost:8082/api/user/projects/${projectId}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        withCredentials: true, // ✅ 쿠키 인증 포함\r\n      });\r\n\r\n      console.log(\"✅ 프로젝트 정보 응답:\", response.data);\r\n      setProject(response.data);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error(\"❌ 프로젝트 정보를 불러오는 데 실패했습니다:\", error);\r\n\r\n      if (error.response?.status === 401 && retry) {\r\n        console.warn(\"🔄 accessToken이 만료됨. refreshToken으로 재시도...\");\r\n        const newToken = await refreshAccessToken();\r\n        if (newToken) {\r\n          fetchProject(false); // ✅ 한 번만 재시도\r\n        } else {\r\n          alert(\"로그인이 필요합니다.\");\r\n          navigate(\"/login\"); // ✅ 로그인 페이지로 이동\r\n        }\r\n      } else {\r\n        setError(\"❌ 프로젝트 정보를 불러올 수 없습니다.\");\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  // ✅ 페이지가 로드될 때 프로젝트 정보 가져오기\r\n  useEffect(() => {\r\n    fetchProject();\r\n  }, [projectId]);\r\n\r\n  return (\r\n    <div>\r\n      {loading ? (\r\n        <h1>로딩 중...</h1>\r\n      ) : error ? (\r\n        <h1>{error}</h1>\r\n      ) : (\r\n        <h1>{project ? project.name : \"프로젝트 없음\"}</h1> // ✅ 프로젝트 이름 표시\r\n      )}\r\n      {projectId && <p>프로젝트 ID: {projectId}</p>}\r\n\r\n      {/* ✅ \"업무 추가\" 버튼 */}\r\n      <button onClick={() => setIsModalOpen(true)}>+ 업무 추가</button>\r\n\r\n      {/* ✅ TaskModal 컴포넌트 (모달창) */}\r\n      {isModalOpen && <TaskModal onClose={() => setIsModalOpen(false)} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaskPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}