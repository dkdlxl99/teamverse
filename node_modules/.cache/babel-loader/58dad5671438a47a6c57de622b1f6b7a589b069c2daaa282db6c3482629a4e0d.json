{"ast":null,"code":"import { Client } from \"@stomp/stompjs\";\nlet stompClient = null;\nlet isConnected = false; // ‚úÖ WebSocket Ïó∞Í≤∞ ÏÉÅÌÉú Ï†ÄÏû•'\n\nexport const getStompClient = () => {\n  const protocol = window.location.protocol === \"https:\" ? \"wss\" : \"ws\"; // üîπ HTTP/HTTPS ÌôòÍ≤Ω Í∞êÏßÄ\n  const wsUrl = `${protocol}://localhost:8082/ws`;\n  if (stompClient) {\n    if (stompClient.connected) {\n      console.log(\"‚ö†Ô∏è Í∏∞Ï°¥ STOMP ClientÍ∞Ä Ïù¥ÎØ∏ Ïó∞Í≤∞ÎêòÏñ¥ ÏûàÏùå.\");\n      return stompClient;\n    } else {\n      console.log(\"üîÑ WebSocket Ïû¨Ïó∞Í≤∞ ÏãúÎèÑ...\");\n      stompClient.activate();\n      return stompClient;\n    }\n  }\n  console.log(`üü¢ ÏÉàÎ°úÏö¥ STOMP Client ÏÉùÏÑ±: ${wsUrl}`);\n  stompClient = new Client({\n    brokerURL: wsUrl,\n    // ‚úÖ ÎèôÏ†ÅÏúºÎ°ú ws/wss ÏÑ§Ï†ï\n    connectHeaders: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    },\n    debug: msg => console.log(\"üìå STOMP Debug:\", msg),\n    reconnectDelay: 5000,\n    heartbeatIncoming: 4000,\n    heartbeatOutgoing: 4000\n  });\n  stompClient.onConnect = () => {\n    console.log(\"‚úÖ WebSocket Ïó∞Í≤∞ ÏÑ±Í≥µ!\");\n  };\n  stompClient.onStompError = frame => {\n    console.error(\"üö® STOMP Ïò§Î•ò Î∞úÏÉù:\", frame.headers[\"message\"]);\n  };\n  stompClient.onWebSocketError = error => {\n    console.error(\"üö® WebSocket Ïó∞Í≤∞ Ïò§Î•ò:\", error);\n  };\n  stompClient.onDisconnect = () => {\n    console.warn(\"‚ö†Ô∏è WebSocket Ïó∞Í≤∞ Ï¢ÖÎ£åÎê®!\");\n  };\n  stompClient.activate();\n  return stompClient;\n};","map":{"version":3,"names":["Client","stompClient","isConnected","getStompClient","protocol","window","location","wsUrl","connected","console","log","activate","brokerURL","connectHeaders","Authorization","localStorage","getItem","debug","msg","reconnectDelay","heartbeatIncoming","heartbeatOutgoing","onConnect","onStompError","frame","error","headers","onWebSocketError","onDisconnect","warn"],"sources":["/Users/woo/Documents/git_local/react/0213/src/api/websocket.js"],"sourcesContent":["import { Client } from \"@stomp/stompjs\";\n\nlet stompClient = null;\nlet isConnected = false; // ‚úÖ WebSocket Ïó∞Í≤∞ ÏÉÅÌÉú Ï†ÄÏû•'\n\nexport const getStompClient = () => {\n    const protocol = window.location.protocol === \"https:\" ? \"wss\" : \"ws\"; // üîπ HTTP/HTTPS ÌôòÍ≤Ω Í∞êÏßÄ\n    const wsUrl = `${protocol}://localhost:8082/ws`;\n\n    if (stompClient) {\n        if (stompClient.connected) {\n            console.log(\"‚ö†Ô∏è Í∏∞Ï°¥ STOMP ClientÍ∞Ä Ïù¥ÎØ∏ Ïó∞Í≤∞ÎêòÏñ¥ ÏûàÏùå.\");\n            return stompClient;\n        } else {\n            console.log(\"üîÑ WebSocket Ïû¨Ïó∞Í≤∞ ÏãúÎèÑ...\");\n            stompClient.activate();\n            return stompClient;\n        }\n    }\n\n    console.log(`üü¢ ÏÉàÎ°úÏö¥ STOMP Client ÏÉùÏÑ±: ${wsUrl}`);\n    stompClient = new Client({\n        brokerURL: wsUrl,  // ‚úÖ ÎèôÏ†ÅÏúºÎ°ú ws/wss ÏÑ§Ï†ï\n        connectHeaders: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n        debug: (msg) => console.log(\"üìå STOMP Debug:\", msg),\n        reconnectDelay: 5000,\n        heartbeatIncoming: 4000,\n        heartbeatOutgoing: 4000,\n    });\n\n    stompClient.onConnect = () => {\n        console.log(\"‚úÖ WebSocket Ïó∞Í≤∞ ÏÑ±Í≥µ!\");\n    };\n\n    stompClient.onStompError = (frame) => {\n        console.error(\"üö® STOMP Ïò§Î•ò Î∞úÏÉù:\", frame.headers[\"message\"]);\n    };\n\n    stompClient.onWebSocketError = (error) => {\n        console.error(\"üö® WebSocket Ïó∞Í≤∞ Ïò§Î•ò:\", error);\n    };\n\n    stompClient.onDisconnect = () => {\n        console.warn(\"‚ö†Ô∏è WebSocket Ïó∞Í≤∞ Ï¢ÖÎ£åÎê®!\");\n    };\n\n    stompClient.activate();\n    return stompClient;\n};\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,gBAAgB;AAEvC,IAAIC,WAAW,GAAG,IAAI;AACtB,IAAIC,WAAW,GAAG,KAAK,CAAC,CAAC;;AAEzB,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAChC,MAAMC,QAAQ,GAAGC,MAAM,CAACC,QAAQ,CAACF,QAAQ,KAAK,QAAQ,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC;EACvE,MAAMG,KAAK,GAAG,GAAGH,QAAQ,sBAAsB;EAE/C,IAAIH,WAAW,EAAE;IACb,IAAIA,WAAW,CAACO,SAAS,EAAE;MACvBC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;MAC9C,OAAOT,WAAW;IACtB,CAAC,MAAM;MACHQ,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;MACrCT,WAAW,CAACU,QAAQ,CAAC,CAAC;MACtB,OAAOV,WAAW;IACtB;EACJ;EAEAQ,OAAO,CAACC,GAAG,CAAC,2BAA2BH,KAAK,EAAE,CAAC;EAC/CN,WAAW,GAAG,IAAID,MAAM,CAAC;IACrBY,SAAS,EAAEL,KAAK;IAAG;IACnBM,cAAc,EAAE;MACZC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;IAChE,CAAC;IACDC,KAAK,EAAGC,GAAG,IAAKT,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEQ,GAAG,CAAC;IACnDC,cAAc,EAAE,IAAI;IACpBC,iBAAiB,EAAE,IAAI;IACvBC,iBAAiB,EAAE;EACvB,CAAC,CAAC;EAEFpB,WAAW,CAACqB,SAAS,GAAG,MAAM;IAC1Bb,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;EACrC,CAAC;EAEDT,WAAW,CAACsB,YAAY,GAAIC,KAAK,IAAK;IAClCf,OAAO,CAACgB,KAAK,CAAC,iBAAiB,EAAED,KAAK,CAACE,OAAO,CAAC,SAAS,CAAC,CAAC;EAC9D,CAAC;EAEDzB,WAAW,CAAC0B,gBAAgB,GAAIF,KAAK,IAAK;IACtChB,OAAO,CAACgB,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;EAC/C,CAAC;EAEDxB,WAAW,CAAC2B,YAAY,GAAG,MAAM;IAC7BnB,OAAO,CAACoB,IAAI,CAAC,sBAAsB,CAAC;EACxC,CAAC;EAED5B,WAAW,CAACU,QAAQ,CAAC,CAAC;EACtB,OAAOV,WAAW;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}